/*! MolView JavaScript Embed build on 2023-08-23 */

var Loader={PubChem:{loadCID:function(e,o){Progress.reset(3),o=o.charAt(0).toUpperCase()+o.slice(1),Messages.process(function(){Request.PubChem.sdf(e,!1,function(e){Model.loadMOL(e),document.title=o||"MolView",Progress.complete(),Messages.clear()},function(){Progress.increment(),Request.PubChem.properties(e,"IsomericSMILES",function(e){Progress.increment(),Request.CIR.resolve(e.PropertyTable.Properties[0].IsomericSMILES,!1,function(e){Model.loadMOL(e),document.title=o||"MolView",Progress.complete(),Messages.clear()},function(){Messages.alert("load_fail")})},function(){Messages.alert("load_fail")})})},"compound")}},RCSB:{loadPDBID:function(e,o){function s(){document.title=o||e.toUpperCase(),Progress.complete(),Messages.clear()}Progress.reset(2),Messages.process(function(){Progress.increment(),Request.RCSB.PDB(e,function(e){Detector.webgl?Model.isGLmol()?(Model.loadPDB(e),s()):(Model.preloadPDB(e),Model.setRenderEngine("GLmol",s)):MolView.mobile?Messages.alert("mobile_old_no_macromolecules"):Model.isJSmol()?(Model.loadPDB(e),s()):(Model.preloadPDB(e),Model.setRenderEngine("JSmol",s))},function(){Messages.alert("load_fail")})},"macromolecule")}},COD:{loadCODID:function(o,s){Progress.reset(2),Messages.process(function(){Progress.increment(),Request.COD.CIF(o,function(e){Model.loadCIF(e),document.title=s||"COD: "+o,Progress.complete(),Messages.clear()},function(){Messages.alert("load_fail")})},"crystal")}},loadSMILES:function(e,s){Request.CIR.available?(Progress.reset(2),Request.resolve(e,0,!1,function(e,o){Model.loadMOL(e),Progress.complete(),Messages.clear(),document.title=s||"MolView"},function(){Messages.alert("load_fail")})):Messages.alert("cir_down")}},MolView={touch:!1,mobile:!1,devicePixelRatio:1,trigger:"click",query:{},loadDefault:!0,JMOL_J2S_PATH:"jmol/j2s",init:function(){MolView.devicePixelRatio=window.devicePixelRatio||(MolView.mobile?1.5:1),this.query=getQuery(),Model.preloadQuery(this.query),(this.query.q||this.query.smiles||this.query.cid||this.query.pdbid||this.query.codid)&&(this.loadDefault=!1),Progress.init(),this.loadDefault&&Progress.reset(2),Request.init(),$(window).on("resize",Model.resize.bind(Model)),Progress.increment(),this.touch&&!Detector.webgl&&Model.JSmol.setQuality(!1),Model.init(function(){$.each(this.query,function(e,o){"smiles"===e?Messages.process(function(){Loader.loadSMILES(o,document.title)},"compound"):"cid"===e?Loader.PubChem.loadCID(o,document.title):"pdbid"===e?Loader.RCSB.loadPDBID(o,o.toUpperCase()):"codid"===e?Loader.COD.loadCODID(o,document.title):"bg"===e&&Model.setBackground(o)}),this.query.smiles||this.query.cid||this.query.pdbid||this.query.codid||Progress.complete()}.bind(this),!Detector.webgl&&(this.query.pdbid&&!MolView.mobile||this.query.codid)?"JSmol":"GLmol")},makeModelVisible:function(){}};$(document).on("ready",function(){MolView.init()});